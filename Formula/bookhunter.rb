# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Bookhunter < Formula
  desc "Software to download chinese ebooks from Internet."
  homepage "https://github.com/bibliolater"
  version "0.1.0"
  license "MIT"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/bibliolater/bookhunter/releases/download/v0.1.0/bookhunter_0.1.0_darwin_arm64.tar.gz"
      sha256 "b230f733ce56805500bb25e7ffffaed6c0ab0fee7df2230621480c0e345454cb"

      def install
        bin.install "bookhunter"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/bibliolater/bookhunter/releases/download/v0.1.0/bookhunter_0.1.0_darwin_amd64.tar.gz"
      sha256 "0664b84cacf9ce54f26191f72393cd95323d8bbc38587fca0fc8510bf6b373d5"

      def install
        bin.install "bookhunter"
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/bibliolater/bookhunter/releases/download/v0.1.0/bookhunter_0.1.0_linux_arm64.tar.gz"
      sha256 "c6379fda48e99b65ec331539912f5dbf42f1f65e7be2c24e405c7a509410a4e0"

      def install
        bin.install "bookhunter"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/bibliolater/bookhunter/releases/download/v0.1.0/bookhunter_0.1.0_linux_amd64.tar.gz"
      sha256 "c9130b64e9d9183cb98c2a1bf545b77d98593117101a27124fdbe628ed142e17"

      def install
        bin.install "bookhunter"
      end
    end
  end

  def post_install
    # Install completions
    (prefix/"completions").mkdir

    system "#{bin}/bookhunter completion zsh > #{prefix}/completions/_bookhunter"
    system "#{bin}/bookhunter completion bash > #{prefix}/completions/bookhunter.bash"

    zsh_completion.install "#{prefix}/completions/_bookhunter"
    bash_completion.install "#{prefix}/completions/bookhunter.bash"

    rmdir prefix/"completions"
  end
end
